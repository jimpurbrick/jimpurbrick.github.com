<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>The Creation Engine No. 2</title>
    <meta name="description" content="">
    <meta name="author" content="Jim Purbrick">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta property="og:image" content="../theme/images/cog200.png">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="../theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="../theme/bootstrap.min.css" rel="stylesheet">
    <link href="../theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href="../theme/local.css" rel="stylesheet">
    <link href="../theme/pygments.css" rel="stylesheet">
    <link rel="shortcut icon" href="../theme/images/cog.ico">

</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
    <div class="container">

        <!-- HACK! main menu is currently empty, so don't display button for it.
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </a>
        -->

	<a class="brand" href="..">
	  <img class="logo" src="../theme/images/cog.png"/>
          The Creation Engine No. 2
	</a>

        <div class="nav-collapse">
        <ul class="nav">
            
        </ul>
        </div>
        
    </div>
    </div>
</div>

<div class="container">
    <div class="content">
    <div class="row">

        <div class="span9">
        

        


    <div class='article'>
        <div class="content-title">
            <a href="../2014/01/29/beyond-time-dilation/"><h1>Beyond Time&nbsp;Dilation?</h1></a>
Wed 29 January 2014

by <a class="url fn" href="../author/jim-purbrick.html">Jim Purbrick</a>
 


 
        </div>
        
        <div><p><img alt="The Battle of B-R5RB" src="http://i.imgur.com/LOVyhw4.jpg" title="The Battle of B-R5RB"></p>
<p><span class="caps">EVE</span> online is <a href="http://community.eveonline.com/news/news-channels/eve-online-news/eve-online-featured-in-applied-design-at-the-museum-of-modern-art/">a remarkable game</a>. On Monday <a href="http://themittani.com/news/b-r5rb-biggest-battle-all-eve">over 2000 people
spent over 20 hours destroying virtual spaceships worth 200,000 <span class="caps">USD</span> in
real money</a> in what was the likely the largest battle in a video game
ever. That <span class="caps">EVE</span> is capaple of supporting such large engagements is an
amazing technical achievement, that thousands of players are willing
to invest huge amounts of time and money in to a game that recently
celebrated its 10th anniversary is an amazing game design&nbsp;achievement.</p>
<p>The reason that the scale of <span class="caps">EVE</span> battles continue to
break records and make headlines is the introduction of <a href="http://massively.joystiq.com/2011/10/02/eve-evolved-time-dilation-and-the-war-on-lag/">Time
Dilation</a> (TiDi) in 2012. When the server simulating a solar system in
<span class="caps">EVE</span> becomes unable to keep up with the rate of updates from connected
clients it slows the simulation down so it can keep up. Before TiDi the
server would become overloaded and start failing to process commands
from players. After time dilation, game time slows down, but commands
continue to processed fairly for all players. Up to a&nbsp;point.</p>
<p>In order to ensure that battles eventually get resolved, TiDi is only
allowed to slow the simulation down to 10% of it&#8217;s normal speed, so at
10% TiDi one second of simulation time passes for every 10 seconds of
real time. The 20+ hour Battle of B-<span class="caps">R5RB</span> on Monday was eventually
brought to a halt due to a server upgrade, if TiDi was allowed to
continue past 10% this would become increasingly common and battles
would often be decided by one side&#8217;s willingness to put up with more
simulation slowdown than the&nbsp;other.</p>
<p>In part due to the extra real time that TiDi gives players to join in,
the scale of large <span class="caps">EVE</span> battles have now grown to the point where they
regularly push TiDi to 10%, server <span class="caps">CPU</span> to 100% and cause the old
problems of failing updates to reappear, as was seen in <a href="http://themittani.com/news/day-servers-didnt-die">The Battle Of <span class="caps">HED</span>-<span class="caps">GP</span></a> a week ago in which many of the attacking
forces were unable to issue commands successfully and so were
destroyed. The limits of TiDi to allow battles in <span class="caps">EVE</span> online to scale
up have been&nbsp;reached.</p>
<p>In his <a href="http://community.eveonline.com/news/dev-blogs/what-a-hed-ache/">analysis of The Battle of <span class="caps">HED</span>-<span class="caps">GP</span></a>, <a href="https://twitter.com/CCP_Veritas"><span class="caps">CCP</span> Veritas</a>, talks about &#8220;one
of the bounding scaling factors in large fleet fights, the unavoidable
O(n2) situation where n people do things that n people need to
see&#8221;. Avoiding this bounding scaling factor may be one way to allow
<span class="caps">EVE</span> battles to scale beyond the limits of&nbsp;TiDi.</p>
<p>As the <a href="http://imgur.com/a/10lG2">amazing screenshots from B-<span class="caps">R5RB</span></a> show, large scale battles in
<span class="caps">EVE</span> quickly become difficult to navigate. With 1000s of pilots in
space, simply finding the ship you want to target becomes hard. As a result <span class="caps">EVE</span> provides an overview that lists the ships
in nearby space. This overview can be sorted in a number of ways
allowing a particular ship to be selected and multiple lists can be
set up filtering out different subsets of things in space. Often during a
battle pilots will use an overview set up to only show enemy ships to
avoid targeting friendly ships, for&nbsp;example.</p>
<p>Pushing these filtering settings to the server may be one way to scale
<span class="caps">EVE</span> battles beyond the limits of TiDi. In the case where all pilots
have their overview set up to only show enemy ships we would have a
situation where n people do things that n/2 people need to see. With
more aggressive filtering that only showed interacting ships plus the
nearest ship of each type plus ships piloted by known pilots plus
ships broadcast to your fleet it might be possible to get to a
situation where the number of things people need to see does not
depend on the number of people in a battle. The O(n2) problem could be avoided
without significantly changing EVEs game play mechanics. If the number
of ships of each type were also sent to the client, the overview could still
be populated with one entry per ship, albeit with missing information,
allowing for situations where fleets want to spread their fire rather
than focussing&nbsp;it.</p>
<p>One potential weakness with this approach is that it would allow
pilots to force the server back in to doing O(n2) work by simply
disabling thier overview filters, something that might become
impossible to resist in a situation where it&#8217;s clear that your fleet
is going to lose hundreds of thousands of real dollars worth of
virtual spaceships. In the Battle of B-<span class="caps">R5RB</span>, one side had ships filled
with autonomous drones which they apparently chose not to deploy to
avoid server load, but might well have decided to deploy if they had
started losing the&nbsp;battle.</p>
<p>A potential solution here would be to prioritise updates from players
with more aggressive filtering settings. If the server runs out of
time at the limits of TiDi it simply stops processing updates and
starts on the next frame, penalising pilots with too liberal filtering
settings who could be made aware that their updates are being dropped
by the <span class="caps">UI</span>. This would encourage pilots engaged in the battle to
aggressively filter while potentially still allowing non-combatants to
capture the occasional screenshot or even video of the entire&nbsp;battle.</p>
<p>Another weakness of this approach is that pilots will no-longer see
every ship in the battle rendered at the correct position in space. A
similar approach to populating the overview could be taken here by
rendering the correct number of ships of each type at ranges beyond
the minimum range for each type, or more symbolic approaches could be
used to display the number of ships in the 3D scene. I did some
related work on rendering <a href="http://ieeexplore.ieee.org/xpl/articleDetails.jsp?reload=true&amp;arnumber=840515">symbolic abstractions of 3D environments in
<span class="caps">MASSIVE</span>-3</a> many moons&nbsp;ago.</p>
<p>I no longer have a copy of the <span class="caps">EVE</span> source code to check whether any of
this is possible and even when I was working on <a href="https://wiki.eveonline.com/en/wiki/CREST_Documentation"><span class="caps">CREST</span></a> I didn&#8217;t look at
the simulation code in <span class="caps">EVE</span> much at all, but this might be one way
around the O(n2) problem that currently limits the size of <span class="caps">EVE</span>
battles. However they choose to tackle it, I wish <span class="caps">CCP</span> Veritas and
the newly rehydrated Team Gridlock all the best in their scaling work
and look forward to reading stories of ever more epic space battles
for the next 10&nbsp;years.</p></div>
        <hr />
    </div>
		

 
        

 

    <div class='article'>
        <a href="../2010/10/23/goodbye-babbage-linden-hello-doc-boffin/"><h2>Goodbye Babbage Linden, Hello Doc&nbsp;Boffin</h2></a>
        <div class= "well small"> Sat 23 October 2010

by <a class="url fn" href="../author/jim-purbrick.html">Jim Purbrick</a>
 


 </div>
        <div class="summary"><p>In June 2004, not long after <a href="http://ondrejka.net/">Cory</a> had introduced me to <a href="http://secondlife.com">Second
Life</a>, version 1.4 was released which added Custom Character
Animations. In the accompanying <a href="http://lindenlab.com/pressroom/releases/04_06_15">press release</a> Philip said “My
fantasy is to be Uma Thurman in Kill Bill”, “I’d pay \$10 for her yellow
jumpsuit and sword …</p> <a class="btn btn-info xsmall" href="../2010/10/23/goodbye-babbage-linden-hello-doc-boffin/">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="../2008/10/23/second-life/"><h2>Like Second&nbsp;Life</h2></a>
        <div class= "well small"> Thu 23 October 2008

by <a class="url fn" href="../author/jim-purbrick.html">Jim Purbrick</a>
 


 </div>
        <div class="summary"><p>Was without a doubt the phrase I heard most often yesterday, especially
if you include variants like “Not Like Second Life”, “A bit like Second
Life” and “Unlike Second Life”. Whatever else it’s achieved, Second Life
has definitely become the frame of reference for the small and somewhat
myopic …</p> <a class="btn btn-info xsmall" href="../2008/10/23/second-life/">read more</a></div>
    </div>	
				
<div class="pagination">
<ul>
    <li class="prev disabled"><a href="#">&larr; Previous</a></li>

    <li class="active"><a href="../tag/virtualworlds.html">1</a></li>

    <li class="next disabled"><a href="#">&rarr; Next</a></li>

</ul>
</div>
 
  
        </div>
        
        <div class="span3">

            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Site
                </li>
            
                <li><a href="../">Archives</a>
                <li><a href="../tags.html">Tags</a>
                <li><a href="https://jimpurbrick.com/feeds/atom/blog/index.html" rel="alternate">Atom feed</a></li>
                <li><a href="https://jimpurbrick.com/feeds/rss/blog/index.html" rel="alternate">RSS feed</a></li>
            </ul>
            </div>




            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Links
                </li>
            
                <li><a href="http://psychochild.org/">Brian Green</a></li>
                <li><a href="http://www.zenofdesign.com/">Damion Schubert</a></li>
                <li><a href="http://www.raphkoster.com/">Raph Koster</a></li>
                <li><a href="http://gwynethllewelyn.net/">Gwyneth Llewelyn</a></li>
                <li><a href="http://nwn.blogs.com/">James Au</a></li>
                <li><a href="http://t-machine.org/">Adam Martin</a></li>
                <li><a href="http://alekskrotoski.com/">Aleks Krotoski</a></li>
                <li><a href="http://www.wonderlandblog.com/">Alice Taylor</a></li>
                <li><a href="http://epredator.com/">Ian Hughes</a></li>
                <li><a href="http://andypiper.co.uk/">Andy Piper</a></li>
                <li><a href="http://davehillier.wordpress.com/">Dave Hillier</a></li>
                <li><a href="http://ondrejka.net/">Cory Ondrejka</a></li>
                <li><a href="http://www.serpentine.com/">Bryan O'Sullivan</a></li>
                <li><a href="http://blog.rocketpoweredjetpants.com/">Simon Stewart</a></li>
            </ul>
            </div>


            <div class="social">
            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Social
                </li>
           
                <li><a href="http://facebook.com/jimpurbrick">facebook</a></li>
                <li><a href="http://twitter.com/jimpurbrick">twitter</a></li>
                <li><a href="http://uk.linkedin.com/in/jimpurbrick">linkedin</a></li>
                <li><a href="http://delicious.com/JimPurbrick">delicious</a></li>
                <li><a href="http://github.com/jimpurbrick">github</a></li>
                <li><a href="http://bitbucket.org/jimpurbrick">bitbucket</a></li>
                <li><a href="http://stackoverflow.com/users/932594/jim-purbrick">stackoverflow</a></li>
                <li><a href="http://last.fm/user/jimpurbrick">lastfm</a></li>
                <li><a href="http://flickr.com/jimpurbrick">flickr</a></li>
            </ul>
            </div>
            </div>

        </div>  
    </div>     </div> 
<footer>
<br />
<p>This <span xmlns:dc="http://purl.org/dc/elements/1.1/" href="http://purl.org/dc/dcmitype/Text" rel="dc:type">work</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://jimpurbrick.com" property="cc:attributionName" rel="cc:attributionURL">Jim Purbrick</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/2.0/uk/">Creative Commons Attribution License</a></p>
</footer>

</div> <!-- /container -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-collapse.js"></script>
<script>var _gaq=[['_setAccount','UA-4868739-1'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//www.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'))</script>
<a href="http://github.com/jimpurbrick"><img style="position: absolute; top: 40px; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub" /></a>
 
</body>
</html>